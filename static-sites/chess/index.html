<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>chessboardjs Example #1000 - Empty Board</title>
  <!-- <base href="../" /> -->

  <link rel="stylesheet"
      href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
      integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
      crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css" integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU" crossorigin="anonymous"> -->
</head>
<body>

<p>Chessboard.js initializes to an empty board with no second argument.</p>

<!--- Begin Example HTML ------------------------------------------------------>
<div id="myBoard" style="width: 400px"></div>
<!--- End Example HTML -------------------------------------------------------->

<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
        crossorigin="anonymous"></script>

<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
        integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
        crossorigin="anonymous"></script>

<script>
    // console.log('start')

    // https://flask-api.ihateiceforfree.com/chess/349d1547-7d16-45f1-93a6-1c118faab145
    // fetch("https://flask-api.ihateiceforfree.com/chess/349d1547-7d16-45f1-93a6-1c118faab145")


// https://flask-api.ihateiceforfree.com/chess/349d1547-7d16-45f1-93a6-1c118faab145

// --- Begin Example JS --------------------------------------------------------
let board = Chessboard('myBoard')
// let board
// --- End Example JS ----------------------------------------------------------

// https://chessboardjs.com/docs#methods


window.board = board

// https://chessboardjs.com/examples.html#4005
//  I want snapback on invalid move
// TODO send move to API.
function onDrop (source, target, piece, newPos, oldPos, orientation) {
    console.log({
        source, target, piece, newPos, oldPos, orientation
    })
//   if (piece.search(/b/) !== -1) {
//     return 'snapback'
//   }
  return
}

window.onload = async function() {
    console.log('window has loaded')

    const response = await fetch("http://127.0.0.1:8082/chess/9992f2dd-664d-4c2d-a3de-10097611ab88");

    console.log(response);

    console.log(response.body)
    const json = await response.json();

    console.log(json);

    const config = {
        position: json.fen,
        draggable: true,
        dropOffBoard: 'snapback', // this is the default
        onDrop: onDrop

    }

    board = Chessboard('myBoard', config)

}
</script>
</body>
</html>
